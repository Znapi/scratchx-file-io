//Expanded:znapi.github.io/scratchx-file-io/ext.js
!function(t){function e(t,e,o,r){function a(t,e,n,i,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&("yes"===r.getResponseHeader("X-Is-ScratchX-File-IO-Helper-App")?i(r.responseText):o())},r.open(t,"http://localhost:8080/"+e,!0),void 0!==n?r.send(n):r.send()}var s;a(t,e,r,o,function(){n=!1,s=window.setInterval(a,5e3,t,e,r,function(t){window.clearInterval(s),delete i[s],n=!0,o(t)},function(){}),i[s]=void 0})}t.read=function(t,n){e("GET",t,n)},t.write=function(t,n,i){e("PUT",n,i,t)},t.make=function(t,n){e("POST",t,n)};var n=!1,i={};t._shutdown=function(){for(var t in i)i.hasOwnProperty(t)&&window.clearInterval(t)},t._getStatus=function(){return n?{status:2,msg:"Ready"}:{status:1,msg:"Waiting for Helper App"}},ScratchExtensions.register("Simple File I/O",{blocks:[["R","read from file %s","read","text.txt"],["w","write %s to file %s","write","hello world","text.txt"],["w","create file %s","make","text.txt"]],url:"http://znapi.github.io/scratchx-file-io/"},t),e("OPTIONS","",function(){n=!0})}({});
