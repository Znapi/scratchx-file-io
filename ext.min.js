!function(e){function t(e,t,o,r,a){function s(e,t,n,i,o,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&("yes"===a.getResponseHeader("X-Is-ScratchX-File-IO-Helper-App")?o(a.responseText):r())},a.open(e,"http://localhost:8080/"+t,!0),void 0!==i&&a.setRequestHeader("X-Action",i),void 0!==n?a.send(n):a.send()}var c;s(e,t,r,a,o,function(){n=!1,c=window.setInterval(s,5e3,e,t,r,a,function(e){window.clearInterval(c),delete i[c],n=!0,o(e)},function(){}),i[c]=void 0})}e.read=function(e,n){t("GET",e,n)},e.write=function(e,n,i){t("PUT",n,i,e)},e.append=function(e,n,i){t("PUT",n,i,e,"append")},e.make=function(e,n){t("POST",e,n)},e.newline_char=function(){return"\n"};var n=!1,i={};e._shutdown=function(){for(var e in i)i.hasOwnProperty(e)&&window.clearInterval(e)},e._getStatus=function(){return n?{status:2,msg:"Ready"}:{status:1,msg:"Waiting for Helper App"}},ScratchExtensions.register("Simple File I/O",{blocks:[["R","read from file %s","read","text.txt"],["w","write %s to file %s","write","hello world","text.txt"],["w","append %s to file %s","append","hello world","text.txt"],["w","create file %s","make","text.txt"],["r","newline","newline_char"]],url:"http://znapi.github.io/scratchx-file-io/"},e),t("OPTIONS","",function(){n=!0})}({});
